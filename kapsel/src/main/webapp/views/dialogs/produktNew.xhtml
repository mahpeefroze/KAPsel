<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ccs="http://xmlns.jcp.org/jsf/composite/ccs"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">


	<h:form id="dlgPanel">
	<p:panelGrid styleClass="fullWidth">
		<p:row>
			<p:column>#{labels.pnr}:</p:column>
			<p:column>#{produktBean.createPnr()}</p:column>
			<p:column>#{labels.nachname}:</p:column>
			<p:column>
				<p:inputText value="#{produktBean.newProdukt.name}" />
			</p:column>
			<p:column rowspan="3">#Bild</p:column>
		</p:row>
		<p:row>
			<p:column colspan="2">#{labels.beschreibung}:</p:column>
			<p:column>#typ:</p:column>
			<p:column>
			
			</p:column>
		</p:row>
		<p:row>
			<!-- Bezeichnungsfeld -->
			<p:column colspan="4">
				<p:inputTextarea styleClass="fullWidth" value="#{produktBean.newProdukt.text}"  placeholder="Kurze Beschreibung des Produkts..."></p:inputTextarea>
			</p:column>
		</p:row>
		<p:row>
			<p:column><p:selectBooleanCheckbox value="#{produktBean.stuecklisteCB}">
				<p:ajax update="stuecklistePanel" event="change"/>
			</p:selectBooleanCheckbox></p:column>
			<p:column>#{labels.c_stueckliste}</p:column>
			<p:column  colspan="3"/>
		</p:row>
	</p:panelGrid>
	<p:panelGrid id="stuecklistePanel">
		<p:row rendered="#{produktBean.stuecklisteCB}">
			<p:column colspan="5">
			
			<ccs:stdToolbar saveAction="" printAction="" editAction="" addAction="" removeAction="">
			</ccs:stdToolbar> 
							<!-- Tabelle mit allen Produkten und Leistungen -->
							
							<p:commandButton update="newBauteilDT" title="#{labels.add}" icon="ui-icon-document" actionListener="#{produktBean.addBauteil}" />
							
							<p:dataTable id="newBauteilDT" var="item" value="#{produktBean.newProdukt.bauteile}" selectionMode="single"
								rowKey="#{item.position}" sortBy="#{item.position}" emptyMessage="#{labels.norecords}" editable="true" editMode="cell">

								<!-- p:ajax event="rowSelect" 
									update=":sect_form" / -->
									
								<p:ajax event="cellEdit" listener="#{produktBean.onProduktNew}"/>	

								<p:column headerText="#{labels.position}" style="width: 30px;">
									<h:outputText value="#{item.position}" />
								</p:column>
								<p:column headerText="#{labels.stueck_zahl}" style="width: 30px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.menge}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.menge}" style="width:96%"/></f:facet>
						            </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.bezeichnung}" style="width: 80px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.name}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.name}" style="width:96%"/></f:facet>
						           </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.prodL}" style="width: 50px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.laenge}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.laenge}" style="width:96%"/></f:facet>
						            </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.prodB}" style="width: 50px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.breite}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.breite}" style="width:96%"/></f:facet>
						            </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.prodD}" style="width: 50px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.dicke}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.dicke}" style="width:96%"/></f:facet>
						            </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.bemerkung}" style="width: 80px;">
									<p:cellEditor>
						               <f:facet name="output"><h:outputText value="#{item.bemerkung}" /></f:facet>
						               <f:facet name="input"><p:inputText value="#{item.bemerkung}" style="width:96%"/></f:facet>
						            </p:cellEditor>
								</p:column>
								<p:column headerText="#{labels.werkstoff}" style="width: 70px;">
									<p:cellEditor>
										<f:facet name="output"><h:outputText value="#{item.material.name}" /></f:facet>
										<f:facet name="input">
										<p:selectOneMenu id="materialTypSelectNew" value="#{produktBean.materialId}" style="width:140px" filter="true" filterMatchMode="contains">
											<f:selectItem itemLabel="Material auswaehlen" itemValue="" noSelectionOption="true" />
											<f:selectItems value="#{materialBean.materialien}" var="mat" itemLabel="#{mat.name} | #{mat.preis} #{labels.waehrung}/#{mat.einheit}" itemValue="#{mat.id}"/>				
										</p:selectOneMenu>
										</f:facet>
									</p:cellEditor>
								</p:column>

							</p:dataTable>
			</p:column>
		</p:row>
	</p:panelGrid>
	</h:form>

	<p:commandButton value="OK" action="#{produktBean.addProdukt()}" update="dlgPanel nav_form" oncomplete="PF('newProdukt').hide();" />
	<p:commandButton value="Abbrechen" action="#{produktBean.resetNewProdukt()}" update="dlgPanel" oncomplete="PF('newProdukt').hide();" />


</ui:composition>